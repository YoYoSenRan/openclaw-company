# 02. 视觉与动画规范（马赛克卡通拟人）

## Scope
定义像素卡通风格、角色设计标准、动画表现规则与 UI 可读性规范。

## Non-goals
- 不追求写实风格。
- 不追求电影级高帧骨骼动画。

## Out-of-scope
- 本文不包含具体美术资源文件交付。
- 本文不包含品牌 VI 设计全案。

## 视觉风格定位
- 俯视角（Top-down）2D 像素风。
- 风格关键词：温暖办公、卡通拟人、信息密度高、状态可读。
- 像素基准：`16x16`（角色核心）与 `24x24`（关键角色增强）。

## 色彩系统

### 全局色板
- 基础地板：中性暖灰（降低视觉疲劳）。
- 功能区域：不同功能房间使用低饱和差异色。
- 状态色：
  - Idle：`#8FA3B8`
  - Thinking：`#5DA9E9`
  - Executing：`#4CAF50`
  - Blocked：`#FFB300`
  - Error：`#E53935`
  - Offline：`#616161`

### 可读性规则
- 状态色与背景对比度 >= 4.5:1。
- 告警使用固定红/橙，不跟主题色联动。

## 角色设计（拟人化要求）

### 角色构成分层
1. 身体底层（体型、肤色、姿态基础）。
2. 头发层（职业差异与个性表达）。
3. 服饰层（岗位视觉识别）。
4. 道具层（耳机、平板、笔记本、电话）。
5. 状态层（图标、光环、告警标记）。

### 职位视觉区分
- PM：偏亮色服饰 + 电话/平板道具。
- 开发：深色上衣 + 键盘动作频率高。
- 测试：中性配色 + 放大镜/检查姿态。
- 设计：高饱和点缀 + 画板道具。
- 运维：冷色服饰 + 告警响应动作明显。

## 动画动作集

### 基础动作
- `idle`
- `walk`
- `turn`
- `typing`

### 业务动作
- `call_phone`
- `brief_face_to_face`
- `join_meeting`
- `thinking`
- `blocked_stress`
- `handoff`
- `celebrate`

### 状态过渡动作
- `interrupt_in`
- `interrupt_out`
- `error_recover`
- `task_accept`

## 动画时长与节奏
- 普通交互动画：300ms ~ 800ms。
- 派单演出：1.2s ~ 3s。
- 告警闪烁周期：600ms。
- 连续状态变化需加最小 120ms 防抖，避免闪烁噪音。

## 场景布局规范

### 房间类型
1. 工位区
2. 会议室
3. 休息区
4. 机房区
5. 指挥区（大屏）

### 图层分离
1. 地板层（Ground）
2. 静态道具层（Props）
3. 角色层（Characters）
4. 特效层（FX）
5. UI/HUD 层（Overlays）

## 坐标与寻路基线
- 地图逻辑坐标采用瓦片坐标（tile），渲染坐标采用像素坐标（pixel）。
- 原点定义：地图左上角为 `(0,0)`。
- 默认瓦片尺寸：`32x32` 像素。
- 坐标换算：`pixelX = tileX * 32`, `pixelY = tileY * 32`。

### 朝向与移动
- 基线采用 4 方向朝向（N/E/S/W），降低首期资源成本。
- 后续可升级到 8 方向，但必须保证动作图集命名兼容。

### 寻路参数（默认）
- 算法：A*。
- 允许对角线：`false`（首期禁用，避免穿模与视觉突变）。
- 每次路径重算节流：`>=100ms`。
- 当目标点不可达时，回退到“最近可达点 + 阻塞提示”。

### 碰撞规则
- 角色与静态障碍（墙、家具）不可重叠。
- 角色之间采用“软碰撞”：允许近距离错位穿插，但禁止长时间重叠。
- 会议室/工位等交互点采用占位锁（occupancy lock）避免多人抢同一点。

## UI 与信息密度规范
- 角色头顶信息最多 3 行。
- 超过 3 个告警时折叠为聚合图标。
- Hover 或选中时展开详情卡片。

## 关键演出模板

### 电话派单
- PM 抬手拨号 -> 员工头顶响铃 -> 接听动作 -> 任务卡飞入。

### 面交派单
- PM 寻路到目标 -> 对话泡泡 -> 员工点头 -> 进入工作动作。

### 阻塞告警
- 状态环转橙 -> 红色感叹号弹出 -> 指挥中心侧栏定位到问题节点。

## 音效规范
- 电话铃声：短促，避免高频刺耳。
- 打字音：低音量循环，不影响长时间使用。
- 告警音：分级（Warning/Error）两种。
- 每种音效可在设置中独立静音。

## 资源制作建议
- 普通员工：Aseprite 帧动画导出图集。
- 关键角色：可选 Spine（需评估许可成本）。
- 导出规范：统一命名与锚点坐标。

### Placeholder 规范（资源未就绪）
- 角色占位：使用统一灰色人体剪影 + 工种字母（PM/DEV/QA...）。
- 道具占位：纯色方块 + 图标文字标记。
- 占位资源命名：`placeholder_<type>_<id>.png`。
- 任何占位资源进入发布分支前必须在任务单中标注替换计划。

### 字体规范
- 场景内文本优先 `BitmapFont`（状态标签、数值、短文本）。
- 面板长文案可用 WebFont，但禁止用于高频刷新节点。
- 首期推荐像素字体：`Press Start 2P`（英文）+ 可读中文像素字体（需版权确认）。

## 移动端适配基线
- 最小可点击区域：`44x44` 像素。
- 支持双指缩放与拖动画布。
- 当屏幕宽度 < 768 时，默认折叠右侧详情面板。
- 低端设备默认降级为 `medium` 渲染质量。

命名示例：
- `char_pm_female_walk_north_01.png`
- `char_dev_male_typing_loop.atlas`

## 性能预算（前端渲染）
- 1080p 下 50 名员工 + 状态特效保持 60 FPS（目标）
- 低配降级策略：
  1. 关闭次要粒子
  2. 降低阴影与光效
  3. 降低动画帧率

## 验收清单
- 角色可通过外观与动作辨识岗位。
- 状态变化无需读文字也能理解。
- 派单演出流程完整且不卡顿。
- 移动端与桌面端都可读可操作。
